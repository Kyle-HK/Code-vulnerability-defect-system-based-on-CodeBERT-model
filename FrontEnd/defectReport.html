<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>代码文本格式检测</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
         body {
            background-image: url('back.jpeg');
	        background-size: cover;
	        backdrop-filter: blur(3px);
            }
        * {
            margin: 0;
            padding: 0;
            list-style: none;
            text-decoration: none;
            font-weight: 520;
            font-family: 微软雅黑;
        }

        #nav {
            width: 900px;
            height: 72px;
            background-color: rgb(247, 249, 250);
            border-radius: 20px;
            margin: 20px auto;
        }

        #nav>ul>li {
            float: left;
            width: 175.75px;
            height: 72px;
            text-align: center;
        }

        #nav>ul>li>a {
            text-align: center;
            line-height: 72px;
            font-size: 20px;
            color: black;
        }

        ul>span {
            float: left;
            line-height: 72px;
            color: rgb(225, 224, 224);
            font-weight: 800;
            font-size: 24px;
        }

        #nav>ul>li>.a1 {
            color: black;
        }

        #intr {
            width: 700px;
            height: 300px;
            background-color: rgb(247, 249, 250);
            border-radius: 20px;
            margin: 20px auto;
        }
        #intr>ul>li {
            float: left;
            width: 700px;
            height: 20px;
            text-align: left;
        }
        #intr>ul>li>a3 {
            text-align: left;
            line-height: 72px;
            font-size: 20px;
            color: red;
        }
        #intr>ul>li>a2 {
            text-align: left;
            line-height: 72px;
            font-size: 20px;
            color: black;
        }
        .logo {
			font-family: 'Kaushan Script', cursive;
			font-size: 2rem;
			color: #fff;
			padding: 0.5rem 1rem;
			border-radius: 0.5rem;
            }
        #detect-button {
			position: fixed;
			top: 220px;
			right: 30%;
		}

    </style>
</head>
<body>
<div class="logo">软件漏洞检测系统</div>

<div id="nav">
    <ul>
        <li><a href="Intro.html" class="a1">Introduction</a></li><span>|</span>
        <li><a href="Detect.html" class="a1">Code Defect</a></li><span>|</span>
        <li><a href="defectReport.html" class="a1">Format Defect</a></li><span>|</span>
        <li><a href="Management.html" class="a1">Management</a></li><span>|</span>
        <li><a href="usermanagement.html" class="a1">Users</a></li>
    </ul>
</div>
<div id="time" style="font-size: 23px;text-align: center;color: white"></div>

<h2 style="color:white;text-align:center">代码文本格式检测</h2><br><br>
<div>
    <button id="detect-button">格式检测</button>
</div>
<p style="color:white;text-align:center">请输入要检测的代码：</p>
<div style="text-align:center">
<textarea id="code-textarea" rows="10" cols="120"></textarea>
</div>
<p style="color:white;text-align:center">检测报告：</p>
<div style="text-align:center">
<textarea id="report-textarea" rows="10" cols="120" readonly></textarea>
</div>
<script>
		$(document).ready(function() {
			$('#detect-button').click(function() {
				var code = $('#code-textarea').val();
				$.ajax({
					url: 'http://222.187.226.110:47572/api/check_code_text/',
					type: 'POST',
					dataType: 'json',
					data: {
						code: code
					},
					success: function(data) {
						var report = '';
						if (data.status === 'error') {
							report += '代码存在格式错误：\n';
							$.each(data.errors, function(index, error) {
								report += '第 ' + error.line + ' 行：' + error.message + '\n';
							});
						} else {
							report += '代码不存在格式错误。';
						}
						$('#report-textarea').val(report);
						$('#report-textarea').scrollTop(0);
					},
					error: function(xhr, status, error) {
						console.log(error);
					}
				});
			});
		});
	</script>
</body>
</html>
