<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>漏洞检测系统</title>
  <style>
            body {
            background-image: url('back.jpeg');
	        background-size: cover;
	        backdrop-filter: blur(3px);
            }
        * {
            margin: 0;
            padding: 0;
            list-style: none;
            text-decoration: none;
            font-weight: 520;
            font-family: 微软雅黑;
        }

        #nav {
            width: 900px;
            height: 72px;
            background-color: rgb(247, 249, 250);
            border-radius: 20px;
            margin: 20px auto;
        }

        #nav>ul>li {
            float: left;
            width: 175.75px;
            height: 72px;
            text-align: center;
        }

        #nav>ul>li>a {
            text-align: center;
            line-height: 72px;
            font-size: 20px;
            color: black;
        }

        ul>span {
            float: left;
            line-height: 72px;
            color: rgb(225, 224, 224);
            font-weight: 800;
            font-size: 24px;
        }

        #nav>ul>li>.a1 {
            color: black;
        }

        #intr {
            width: 700px;
            height: 300px;
            background-color: rgb(247, 249, 250);
            border-radius: 20px;
            margin: 20px auto;
        }
        #intr>ul>li {
            float: left;
            width: 700px;
            height: 20px;
            text-align: left;
        }
        #intr>ul>li>a3 {
            text-align: left;
            line-height: 72px;
            font-size: 20px;
            color: red;
        }
        #intr>ul>li>a2 {
            text-align: left;
            line-height: 72px;
            font-size: 20px;
            color: black;
        }
* {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
	font-family: sans-serif;
}

.container {
	width: 80%;
	margin: 0 auto;
	padding: 50px 0;
}

h2 {
	margin-bottom: 20px;
}

table {
	width: 100%;
	border-collapse: collapse;
	color: white;

}

table th{
padding: 10px;
	text-align: left;
	color:white;
	border: 1px solid #ddd;
}


table td {
	padding: 10px;
	text-align: left;
	color:white;
	border: 1px solid #ddd;
}

table th {
	background: #000;
	color: #fff;
}

table td button {
	background: #000;
	color: #fff;
	background-color: rgba(0, 0, 0, 0.5);
	border: none;
	padding: 5px 10px;
	border-radius: 5px;
	cursor: pointer;
}

table td button:hover {
	background: #ffc107;
	color: #000;
}
.logo {
			font-family: 'Kaushan Script', cursive;
			font-size: 2rem;
			color: #fff;
			padding: 0.5rem 1rem;
			border-radius: 0.5rem;
			}
  </style>
</head>

<body>
<div class="logo">软件漏洞检测系统</div>
<div id="nav">
  <ul>
    <li><a href="Intro.html" class="a1">Introduction</a></li><span>|</span>
    <li><a href="Detect.html" class="a1">Code Defect</a></li><span>|</span>
    <li><a href="defectReport.html" class="a1">Format Defect</a></li><span>|</span>
    <li><a href="Management.html" class="a1">Management</a></li><span>|</span>
    <li><a href="Management.html" class="a1">Users</a></li>
  </ul>
</div>

<div class="container">
  <h2 style="color:white">用户信息</h2>
  <table>
    <thead>
    <tr style="background-color: rgba(0, 0, 0, 0.5);">
      <th>用户名</th>
      <th>密码</th>
      <th>登录时间</th>
      <th>操作</th>
    </tr>
    </thead>
    <tbody id="user-list">
    </tbody>
  </table>
</div>
<div style="text-align:center">
  <button class="logout" onclick="logout()">退出登录</button>
</div>
<script>
const userList = document.querySelector('#user-list');

// 从LocalStorage中获取所有用户信息
const users = [
	{
		username: localStorage.getItem('username'),
		password: localStorage.getItem('password'),
		loginTime: localStorage.getItem('loginTime')
	}
];
//console.log("请求的结果--->", users.data)

// 显示所有用户信息
function displayUsers() {
	userList.innerHTML = '';
	users.forEach((user, index) => {
		const row = document.createElement('tr');
		row.innerHTML = `
			<td>${user.username}</td>
			<td>${user.password}</td>
			<td>${user.loginTime}</td>
			<td>
				<button class="edit-btn" data-index="${index}">编辑</button>
				<button class="delete-btn" data-index="${index}">删除</button>
			</td>
		`;
		userList.appendChild(row);
	});
}

displayUsers();

// 编辑用户信息
userList.addEventListener('click', (event) => {
	if (event.target.classList.contains('edit-btn')) {
		const index = event.target.dataset.index;
		const user = users[index];

		// 显示编辑用户信息的模态框
		const newUsername = prompt('请输入新的用户名：', user.username);
		const newPassword = prompt('请输入新的密码：', user.password);

		if (newUsername || newPassword) {
			user.username = newUsername;
			user.password = newPassword;
			localStorage.setItem('username', newUsername);
			localStorage.setItem('password', newPassword);
			displayUsers();
		}
	}
});

// 删除用户信息
userList.addEventListener('click', (event) => {
	if (event.target.classList.contains('delete-btn')) {
		const index = event.target.dataset.index;
		users.splice(index, 1);
		localStorage.removeItem('username');
		localStorage.removeItem('password');
		localStorage.removeItem('loginTime');
		displayUsers();
	}
});

// 退出登录
    function logout() {
      window.location.href = 'login.html';
    }
    function time() {
				var vWeek, vWeek_s, vDay;
				vWeek = ["星期天", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"];
				var date =  new Date();
				year = date.getFullYear();
				month = date.getMonth() + 1;
				day = date.getDate();
				hours = date.getHours();
				minutes = date.getMinutes();
				seconds = date.getSeconds();
				vWeek_s = date.getDay();
				document.getElementById("time").innerHTML = year + "年" + month + "月" + day + "日" + "\t" + hours + ":" + minutes + ":" + seconds + "\t" + vWeek[vWeek_s];
			};
                setInterval("time()", 1000);
</script>
</body>
</html>